{% extends "base.html" %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto; padding: 24px;">
    <h1 style="color: #b89fda; margin-bottom: 24px;">Add Pin to {{ map.name or 'Map' }}</h1>
    
    <form method="POST" 
          action="{{ url_for('add_pin', world_id=world.id, map_id=map.id) }}"
          style="background: rgba(74, 61, 106, 0.2); border: 1px solid #3d3350; border-radius: 8px; padding: 24px;">
        
        <!-- Hidden coordinate fields -->
        <input type="hidden" name="x_percent" value="{{ x_percent }}">
        <input type="hidden" name="y_percent" value="{{ y_percent }}">
        
        <!-- Pin name -->
        <div style="margin-bottom: 20px;">
            <label for="name" style="display: block; margin-bottom: 8px; color: #b89fda; font-weight: 600;">
                Pin Name *
            </label>
            <input type="text" 
                   id="name" 
                   name="name" 
                   required
                   placeholder="e.g., Town Square, Dungeon Entrance"
                   style="width: 100%; padding: 10px; background: #0d1f2d; border: 1px solid #3d3350; border-radius: 4px; color: #e5e7eb; font-family: Cathedral; font-size: 1rem;">
        </div>
        
        <!-- Pin color -->
        <div style="margin-bottom: 20px;">
            <label for="color" style="display: block; margin-bottom: 8px; color: #b89fda; font-weight: 600;">
                Pin Color
            </label>
            <select id="color" 
                    name="color"
                    style="width: 100%; padding: 10px; background: #0d1f2d; border: 1px solid #3d3350; border-radius: 4px; color: #e5e7eb; font-family: Cathedral; font-size: 1rem; cursor: pointer;">
                <option value="#b89fda">ğŸŸ£ Purple</option>
                <option value="#3b82f6">ğŸ”µ Blue</option>
                <option value="#10b981">ğŸŸ¢ Green</option>
                <option value="#f59e0b">ğŸŸ  Amber</option>
                <option value="#ef4444">ğŸ”´ Red</option>
                <option value="#8b5cf6">ğŸŸ£ Violet</option>
                <option value="#64748b">âš« Gray</option>
            </select>
        </div>
        
        <div style="margin-bottom: 24px;">
            <label for="target_map_id" style="display: block; margin-bottom: 8px; color: #b89fda; font-weight: 600;">
                Link to Map (Optional)
            </label>
            <select id="target_map_id" 
                    name="target_map_id"
                    style="width: 100%; padding: 10px; background: #0d1f2d; border: 1px solid #3d3350; border-radius: 4px; color: #e5e7eb; font-family: Cathedral; font-size: 1rem; cursor: pointer;">
                <option value="">-- No Link --</option>
                {% for world_map in maps %}
                    {% if world_map.id != map.id %}
                    <option value="{{ world_map.id }}">{{ world_map.name or 'Unnamed Map' }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <p style="font-size: 0.85rem; color: #8b7ba8; margin-top: 8px;">
                Clicking this pin will navigate to the selected map
            </p>
        </div>
        
        <div style="padding: 12px; background: rgba(15, 35, 48, 0.5); border: 1px solid #3d3350; border-radius: 4px; margin-bottom: 24px;">
            <p style="margin: 0; font-size: 0.85rem; color: #8b7ba8;">
                ğŸ“ Position: X: {{ "%.2f"|format(x_percent) }}%, Y: {{ "%.2f"|format(y_percent) }}%
            </p>
        </div>
        
        <div style="display: flex; gap: 12px; justify-content: flex-end;">
            <a href="{{ url_for('display_world', id=world.id, map=map.id) }}" 
               class="btn-secondary"
               style="text-decoration: none; display: inline-block;">
                Cancel
            </a>
            <button type="submit" 
                    class="btn-secondary"
                    style="background: rgba(184, 159, 218, 0.3); border-color: #b89fda; cursor: pointer;">
                Create Pin
            </button>
        </div>
    </form>
</div>
{% endblock %}
