{% extends "base.html" %}

{% block content %}
    <div class="world-homepage" style="display: flex; gap: 24px; height: calc(100vh - 100px); padding: 24px;">
        <div>
            <img src="{{ url_for('static', filename=world.thumbnail_path) }}" alt="{{ world.name }} Logo" style="max-width: 100%; height: auto; border-radius: 8px;">
            <nav class="nav-links" style="display: flex; gap: 10px; margin-top: 10px;">
                <a href="{{ url_for('update_world', id=world.id) }}" class="btn-secondary">Update World</a>
                <a href="{{ url_for('upload_map', world_id=world.id) }}" class="btn-secondary">Upload Map</a>
            </nav>
            <h1 style="margin: 0;">{{ world.name }}</h1>
            <h2>World info</h2>
            {% if world.info %}
                <div>
                    <p>{{ world.info }}</p>
                </div>
            {% endif %}
            <h2>Locations</h2>
            {% if world.maps %}
                {% for map in world.maps %}
                <div style="display: flex; align-items: center; gap: 8px; padding: 8px; margin-bottom: 4px; background: rgba(74, 61, 106, 0.15); border: 1px solid #3d3350; border-radius: 4px;">
                    <a href="#" 
                        hx-get="{{ url_for('get_map', map_id=map.id) }}"
                        hx-target=".map-background"
                        hx-swap="innerHTML"
                        style="flex: 1; color: #d1d5db; text-decoration: none; font-size: 0.85rem;"
                        onmouseover="this.style.color='#b89fda'"
                        onmouseout="this.style.color='#d1d5db'">
                        {{ map.name or 'Unnamed Map'}}
                    </a>
                </div>
                {% endfor %}
            {% endif %}
        </div>
        
        {% if world.primary_map %}
            <div class="map-container">
                <h2 style="margin: 0 0 16px 0;">Map</h2>
                <div class="map-background" 
                    style="min-height: 500px; display: flex; align-items: center; justify-content: center; background-color: #0f2330; border-radius: 8px; overflow: hidden; position: relative;">
                        <img src="{{ url_for('static', filename=world.primary_map.body_path) }}" 
                                alt="Map" 
                                style="max-width: 100%; max-height: 100%; object-fit: contain;">
            </div>
        </div>
        {% else %}
        <div class="map-container">
            <h2 style="margin: 0 0 16px 0;">Map</h2>
            <div class="map-background"
                style="min-height: 500px; display: flex; align-items: center; justify-content: center; background-color: #0f2330; border-radius: 8px;">
            <p style="color: #8b7ba8; font-size: 18px;">No primary map set. Upload a map to get started!</p>
            </div>
        </div>
        {% endif %}
        </div>
{% endblock %}