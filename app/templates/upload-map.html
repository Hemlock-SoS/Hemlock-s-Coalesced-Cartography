{% extends "base.html" %}

{% block content %}
    <div class="modal" style="display: block; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
  <div style="background-color: #1f2937; margin: 10% auto; padding: 20px; width: 80%; max-width: 500px; border-radius: 5px;">
    <button 
      onclick="window.history.back()"
      style="float: right; font-size: 24px; border: none; background: none; cursor: pointer; color: #fff;">
      &times;
    </button>
    
    <h3>Upload Map</h3>
    
    <form 
      hx-post="{{ url_for('upload_map', world_id=world_id) }}" 
      hx-encoding="multipart/form-data"
      hx-on:htmx:after-request="if(event.detail.successful) window.history.back()">
      
      {{ form.csrf_token }}
      <div style="margin-bottom: 15px;">
        {{ form.mapName.label }}
        {{ form.mapName(style="width: 100%; padding: 8px; margin-top: 5px; background-color: #374151; color: #fff; border: 1px solid #4b5563; border-radius: 4px;") }}
        {% if form.mapFile.errors %}
          <span style="color: red;">{{ form.mapFile.errors[0] }}</span>
        {% endif %}
      </div>
      
      <div style="margin-bottom: 15px;">
        {{ form.mapFile.label }}
        {{ form.mapFile(style="width: 100%; padding: 8px; margin-top: 5px; background-color: #374151; color: #fff; border: 1px solid #4b5563; border-radius: 4px;") }}
        {% if form.mapFile.errors %}
          <span style="color: red;">{{ form.mapFile.errors[0] }}</span>
        {% endif %}
      </div>

      <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 8px;">
          {{ form.set_as_primary(style="width: 18px; height: 18px; cursor: pointer; accent-color: #b89fda;") }}
          {{ form.set_as_primary.label(style="color: #b89fda; font-weight: 600; cursor: pointer; margin: 0;") }}
        </div>
      
      <button type="submit" style="padding: 10px 20px; margin-right: 10px; background-color: #3b82f6; color: #fff; border: none; border-radius: 4px; cursor: pointer;">Upload</button>
      <button 
        type="button"
        onclick="window.history.back()"
        style="padding: 10px 20px; background-color: #6b7280; color: #fff; border: none; border-radius: 4px; cursor: pointer;">
        Cancel
      </button>
    </form>
  </div>
</div>
{% endblock %}